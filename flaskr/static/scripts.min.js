let last_sort_by=7,last_sort_dir="asc",mouse_down_sort_by=7,table_cards="table";function heapifyTable(e,t,l,s,d){let a=l,n=2*l+1,i=2*l+2;if(n<t){let t,i,r,o;t=getItem(e,l,s),i=getItem(e,n,s),r=getDataValue(t),o=getDataValue(i),"asc"===d?r<o&&(a=n):r>o&&(a=n)}if(i<t){let t,l,n,r;t=getItem(e,a,s),l=getItem(e,i,s),n=getDataValue(t),r=getDataValue(l),"asc"===d?n<r&&(a=i):n>r&&(a=i)}if(a!==l){let n=e[a];e[a]=e[l],e[l]=n,heapifyTable(e,t,a,s,d)}}function heapSortGeneric(e,t,l,s){let d,a=s.header_row?Array.prototype.slice.call(l).slice(1):Array.prototype.slice.call(l),n=a.length;for(d=n-1;d>=0;d--)heapifyTable(a,n,d,e,last_sort_by===e&&"asc"===last_sort_dir?"desc":"asc");for(d=n-1;d>=0;d--){let t=a[d];a[d]=a[0],a[0]=t,heapifyTable(a,d,0,e,last_sort_by===e&&"asc"===last_sort_dir?"desc":"asc")}for(;t.firstChild;)t.removeChild(t.firstChild);if(s.header_row&&t.appendChild(s.header_row),s.columns&&s.columns>1){let e,l;for(d=0;d<Math.ceil(n/s.columns);d++){for((e=document.createElement("div")).classList.add("columns"),l=0;l<s.columns&&d*s.columns+l<n;l++)e.appendChild(a[d*s.columns+l]);t.appendChild(e)}}else for(d=0;d<n;d++)t.appendChild(a[d])}function getAllCards(){const e=document.getElementById("cards");if(e&&e.hasChildNodes()){const t=e.firstElementChild;if(t&&t.hasChildNodes())return t.childNodes}}function getTarget(e,t="",l="",s=""){let d=(e=e||Event).target||Event.target;return d.tagName===t?d=d.firstElementChild:d.tagName===l?d=d.parentElement:d.tagName===s&&(d=d.parentElement.parentElement),d}function getItem(e,t,l){let s;return e[t].cells&&(s=e[t].cells[l]),s||(s=e[t].children[l]),s}function getDataValue(e){let t=e.getAttribute("data-value");return isNaN(t)?t:+t}function isShown(e){return e.classList&&!e.classList.contains("is-hidden")}function isHidden(e){return e.classList&&e.classList.contains("is-hidden")}function hide(e){isShown(e)&&e.classList.add("is-hidden")}function show(e){isHidden(e)&&e.classList.remove("is-hidden")}function updateColours(){const e=document.getElementById("cards").firstElementChild,t=["is-link","is-success","is-primary","is-warning","is-danger","is-dark"];let l=0;for(const s of e.children)if(isShown(s)){if(!s.classList.contains(t[l])){for(const e of t)s.classList.remove(e);s.classList.add(t[l])}l=l===t.length-1?0:l+1}}function showFilterModal(){document.getElementById("filter-modal").classList.add("is-active")}function hideFilterModal(){document.getElementById("filter-modal").classList.remove("is-active"),hideFilterModalLoading(),showFilterModalSliders()}function showFilterModalSliders(){show(document.querySelector("div#filter-modal.modal > div.modal-content > div.modal-sliders"))}function hideFilterModalSliders(){hide(document.querySelector("div#filter-modal.modal > div.modal-content > div.modal-sliders"))}function showFilterModalLoading(){show(document.querySelector("div#filter-modal.modal > div.modal-content > div.modal-loading"))}function hideFilterModalLoading(){hide(document.querySelector("div#filter-modal.modal > div.modal-content > div.modal-loading"))}function setElementMaxValue(e){e.value=e.max}function findOutputForSlider(e){let t=null;return document.querySelectorAll("input[type=number].slider-output").forEach(l=>{l.dataset.for===e.id&&(t=l)}),t}function findSliderForOutput(e){let t=null;return document.querySelectorAll("input[type=range].slider").forEach(l=>{l.id===e.dataset.for&&(t=l)}),t}function getAllSliders(){return document.querySelectorAll("input[type=range].slider")}function getAllSliderOutputs(){return document.querySelectorAll("input[type=number].slider-output")}function getAllSwitches(){return document.querySelectorAll("select.slider-switch")}function getAllRows(){return document.querySelectorAll("table#compare_table tr")}function updateModalSlider(e){const t=findSliderForOutput(e);t&&(t.value=e.value)}function updateModalSliderOutput(e){const t=findOutputForSlider(e);t&&(t.value=Math.round(e.value))}function updateAllModalSliderOutputs(){document.querySelectorAll('input[type="range"].slider').forEach(e=>updateModalSliderOutput(e))}function addEventListenerSlider(e){e.addEventListener("mousemove",()=>updateModalSliderOutput(e)),e.addEventListener("change",()=>updateModalSliderOutput(e))}function addEventListenerSliders(e){e.forEach(e=>addEventListenerSlider(e))}function addEventListenerSliderOutput(e){e.addEventListener("change",()=>updateModalSlider(e))}function addEventListenerSliderOutputs(e){e.forEach(e=>addEventListenerSliderOutput(e))}function addEventFilter(e){e.addEventListener("mousedown",()=>startFiltering()),e.addEventListener("mouseup",()=>filterCards()),e.addEventListener("mouseup",()=>filterTable())}function addEventsFilter(e){Array.from(document.getElementsByClassName(e)).forEach(e=>addEventFilter(e))}function addEventReset(e){e.addEventListener("click",()=>resetFilters())}function addEventsReset(e){Array.from(document.getElementsByClassName(e)).forEach(e=>addEventReset(e))}function getCategoryValueForElement(e,t){let l=null;return e.classList&&e.dataset.category===t?e.dataset.value:(e.hasChildNodes()>0&&e.childNodes.forEach(e=>{const s=getCategoryValueForElement(e,t);s&&(l=s)}),l)}function startFiltering(){showFilterModal(),hideFilterModalSliders(),showFilterModalLoading()}function filter(e,t){const l=getAllSliders(),s=getAllSwitches();e.forEach(e=>{l.forEach((l,d)=>{if(e.nodeName===t){const t=getCategoryValueForElement(e,l.dataset.category);"or-more"===s[d].value&&t<l.value||"or-less"===s[d].value&&t>l.value?hide(e):show(e)}})}),updateColours(),hideFilterModal()}function filterCards(){filter(getAllCards(),"DIV")}function filterTable(){filter(getAllRows(),"TR")}function resetFilters(){getAllSliders().forEach(e=>setElementMaxValue(e)),getAllSliderOutputs().forEach(e=>setElementMaxValue(e)),getAllCards().forEach(e=>show(e)),getAllRows().forEach(e=>show(e)),updateColours(),hideFilterModal()}document.addEventListener("DOMContentLoaded",function(e){document.getElementById("sorters").addEventListener("mousedown",function(e){let t=getTarget(e,"DIV","SPAN","I");if(t.classList.contains("sort_btn")){mouse_down_sort_by=parseInt(t.getAttribute("data-sort")),last_sort_dir=last_sort_by===mouse_down_sort_by&&"asc"===last_sort_dir?"desc":"asc",last_sort_by=mouse_down_sort_by;let e=document.getElementsByClassName("sort_btn");for(const t of e)t.classList.remove("is-selected"),t.classList.remove("is-primary"),t.classList.remove("is-danger"),t.children[0].children[0].classList.remove("fa-chevron-up"),t.children[0].children[0].classList.remove("fa-chevron-down"),t.children[0].children[0].classList.remove("fa-chevron-right"),t.children[0].children[0].classList.add("fa-chevron-right");t.children[0].children[0].classList.remove("fa-chevron-right"),"asc"===last_sort_dir?(t.classList.add("is-primary"),t.children[0].children[0].classList.add("fa-chevron-down")):(t.classList.add("is-danger"),t.children[0].children[0].classList.add("fa-chevron-up")),t.classList.add("is-selected"),t.classList.add("is-loading")}},!1),document.getElementById("sorters").addEventListener("mouseup",function(e){let t=document.getElementById("compare_table"),l=t.rows;heapSortGeneric(mouse_down_sort_by,t,l,{header_row:t.rows[0]});let s=document.getElementById("cards").firstElementChild;heapSortGeneric(mouse_down_sort_by,s,s.children,{}),updateColours();let d=document.getElementsByClassName("sort_btn");for(const e of d)e.classList.remove("is-loading")},!1),document.getElementById("table-cards-btn").addEventListener("click",function(e){let t=getTarget(e,"","SPAN","I"),l=t.children[0].children[0];"table-cards-btn"===t.id&&(t.classList.contains("is-danger")?(t.classList.remove("is-danger"),t.classList.add("is-link"),l.classList.remove("fa-list-alt"),l.classList.remove("far"),l.classList.add("fa-th"),l.classList.add("fas"),document.getElementById("compare_table").style.display="table",document.getElementById("compare_cards").style.display="none"):(t.classList.remove("is-link"),t.classList.add("is-danger"),l.classList.remove("fa-th"),l.classList.remove("fas"),l.classList.add("fa-list-alt"),l.classList.add("far"),document.getElementById("compare_table").style.display="none",document.getElementById("compare_cards").style.display="block"))},!1),document.getElementById("filter-btn").addEventListener("click",function(){showFilterModal()});const t=document.querySelectorAll('input[type="range"].slider'),l=document.querySelectorAll('input[type="number"].slider-output');addEventsFilter("filter-modal-close"),addEventsFilter("modal-loading"),addEventsReset("filter-modal-reset"),addEventListenerSliders(t),addEventListenerSliderOutputs(l),updateAllModalSliderOutputs(),filterCards(),filterTable()});